<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary"><i class="bi bi-grid-3x3-gap"></i> Gestión de Mesas</h2>
    <button class="btn btn-primary shadow-sm" (click)="agregarNuevaMesa()">
      <i class="bi bi-plus-circle"></i> Agregar Mesa
    </button>
  </div>

  <div class="row">
    @for (mesa of mesas; track mesa.id) {
      <div class="col-6 col-md-3 mb-4 position-relative">
        <button class="btn btn-danger btn-sm position-absolute shadow-sm" 
                title="Eliminar Mesa {{ mesa.numero }}"
                style="top: -10px; right: 10px; z-index: 10; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;"
                (click)="quitarMesa(mesa.id, $event)">
          <i class="bi bi-x-lg"></i>
        </button>

        <a [routerLink]="['/menu', mesa.id]" 
   class="card h-100 shadow-sm text-decoration-none mesa-card border-0 text-white"
   [style.background-color]="mesa.estado === 'OCUPADA' ? '#dc3545' : '#28a745'">
   
  <div class="card-body d-flex flex-column align-items-center justify-content-center" style="min-height: 140px;">
    <div class="h2 mb-1">Mesa {{ mesa.numero }}</div>
    
    <span class="badge shadow-sm px-3 py-2 rounded-pill"
          [ngClass]="mesa.estado === 'OCUPADA' ? 'bg-light text-danger' : 'bg-white text-dark'">
      {{ mesa.estado }}
    </span>
  </div>
</a>
      </div>
    } @empty {
      <div class="col-12 text-center py-5 border rounded bg-light">
        @if (cargando) {
          <div class="spinner-border text-primary" role="status"></div>
          <p class="mt-3">Conectando con la base de datos de Supabase...</p>
        } @else {
          <i class="bi bi-inbox display-1 text-muted"></i>
          <p class="text-muted mt-3">No hay mesas registradas. ¡Agrega la primera!</p>
        }
      </div>
    }
  </div>
</div>
<div class="container-fluid mt-4 px-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-danger fw-bold border-bottom border-3 border-danger pb-2">
      <i class="bi bi-list-task"></i> PANEL DE PRODUCCIÓN - COCINA
    </h2>
    <span class="badge bg-dark fs-5 p-2">ÓRDENES ACTIVAS: {{ pedidosPendientes.length }}</span>
  </div>

  <div class="card shadow-sm border-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0 border">
        <thead class="table-dark text-uppercase" style="font-size: 0.85rem; letter-spacing: 1px;">
          <tr>
            <th class="ps-3">ID Pedido</th>
            <th>Mesa</th>
            <th>Detalle del Pedido (Cant. | Plato)</th>
            <th>Notas Especiales</th>
            <th>Estado</th>
            <th class="text-center">Acción</th>
          </tr>
        </thead>
        
        <tbody>
          @for (pedido of pedidosPendientes; track pedido.id) {
            <tr class="border-bottom">
              <td class="ps-3 fw-bold text-primary">#{{ pedido.id }}</td>
              
              <td>
                @if (pedido.mesa) {
                  <span class="badge bg-warning text-dark fs-6 px-3">MESA {{ pedido.mesa.numero }}</span>
                } @else {
                  <span class="badge bg-secondary">SIN MESA</span>
                }
              </td>

              <td>
                <ul class="list-unstyled mb-0">
                  @for (item of pedido.items; track item.id) {
                    <li class="mb-2">
                      <span class="badge bg-dark rounded-pill me-2">{{ item.cantidad }}</span>
                      <span class="fw-semibold text-uppercase">
                        {{ item.plato?.nombre || 'PLATO NO ENCONTRADO' }}
                      </span>
                    </li>
                  }
                </ul>
              </td>

              <td>
                @for (item of pedido.items; track item.id) {
                  @if (item.notas) {
                    <div class="small text-danger italic mb-1">
                      <i class="bi bi-info-circle"></i> {{ item.notas }}
                    </div>
                  }
                } @empty { <span class="text-muted small">Sin notas</span> }
              </td>

              <td>
                <span class="badge bg-danger animate-pulse">PENDIENTE</span>
              </td>

              <td class="text-center pe-3">
                <button class="btn btn-success btn-sm fw-bold px-4 py-2 shadow-sm" 
                        (click)="marcarListo(pedido.id)">
                  <i class="bi bi-check2-circle me-1"></i> DESPACHAR
                </button>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="6" class="text-center py-5">
                <div class="text-muted">
                  <i class="bi bi-inbox display-4"></i>
                  <p class="mt-2 fs-5">No hay órdenes pendientes en este momento.</p>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>